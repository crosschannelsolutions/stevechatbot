</div>

<script>
function sendMessage() {
async function sendMessage() {
    const userInput = document.getElementById("user-input").value;
    if (!userInput) return;

    const chatBox = document.getElementById("chat-box");
    chatBox.innerHTML += `<div class="user-message">${userInput}</div>`;
    document.getElementById("user-input").value = "";

    const botMessageDiv = document.createElement("div");
    botMessageDiv.className = "bot-message";
    chatBox.appendChild(botMessageDiv);

    const response = await fetch("https://stevechatbot.vercel.app/api/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ messages: [{ role: "user", content: userInput }] })
    });

    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let botMessage = "";

    while (true) {
        const { done, value } = await reader.read();
        if (done) break;

        let newText = decoder.decode(value);
        newText = newText.replace(/\*\*(.*?)\*\*/g, "$1"); // ✅ Remove **bold** text
        newText = newText.replace(/\*(.*?)\*/g, "$1"); // ✅ Remove *italic* text
        botMessage += newText;
        botMessageDiv.innerHTML = botMessage;
    }

    chatBox.scrollTop = chatBox.scrollHeight;
}
)
    .catch(error => {
        console.error("❌ Fetch Error:", error);
        chatBox.innerHTML += `<div class="bot-message">Sorry, an error occurred.</div>`;
});

    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let botMessage = "";

    while (true) {
        const { done, value } = await reader.read();
        if (done) break;
        botMessage += decoder.decode(value);
        botMessageDiv.innerHTML = botMessage; // ✅ Update UI in real-time
    }

    chatBox.scrollTop = chatBox.scrollHeight;
}

</script>
</body>
</html>
